# Настройка системы валют

## Обновление курсов валют

Курсы валют обновляются автоматически через Edge Function. Для ручного обновления курсов выполните один из следующих вариантов:

### Вариант 1: Через браузер
Откройте URL в браузере:
```
https://[ваш-проект].supabase.co/functions/v1/update-exchange-rates
```

### Вариант 2: Через curl
```bash
curl https://[ваш-проект].supabase.co/functions/v1/update-exchange-rates
```

### Вариант 3: Настроить автоматическое обновление
Вы можете настроить cron job или scheduled function для автоматического обновления курсов каждый день.

## Как работает система

1. **Хранение цен**: Все цены в базе данных хранятся в AED (дирхамы ОАЭ) как чистые числа без валюты
2. **Курсы валют**: Хранятся в таблице `exchange_rates` с колонками:
   - `currency_from`: базовая валюта (AED)
   - `currency_to`: целевая валюта (TJS, USD)
   - `rate`: курс обмена
   - `updated_at`: время последнего обновления

3. **Отображение**: При выборе валюты цены автоматически конвертируются по актуальному курсу

## Поддерживаемые валюты

- **AED** - дирхам ОАЭ (базовая валюта)
- **TJS** - таджикский сомони
- **USD** - доллар США

## Импорт Excel файлов

При импорте Excel файлов система распознаёт следующие колонки:
- **Item Code** или **Part No** → код запчасти
- **Name** или **Part Name** → название запчасти
- **Quantity On Hand** или **Qty** → количество
- **Price** → цена (в AED)

Система автоматически очистит цены от символов валюты и сохранит только числа.
